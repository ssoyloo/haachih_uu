<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Request Example</title>
</head>
<body>

    <form id="form" method="post">
        <input type="text" id="name" placeholder="Name">
        <input type="text" id="body" placeholder="Body">
        <input type="text" id="id" placeholder="ID">
        <input type="submit" value="Add Todo">
    </form>

    <script>
        async function addtocart(id, title) {
    console.log(id);
    console.log(title);

    const apiUrl = "https://api.jsonbin.io/v3/b/6543a6a454105e766fca6fa1";

    // New item to be added (ensure uniqueness)
    const newItem = {
        id,
        title
        // ... other properties
    };

    // Fetch existing data from the API
    async function fetchData(apiUrl) {
        const response = await fetch(apiUrl);
        const data = await response.json();
        return data.record;
    }

    // Function to check if an item with the same properties already exists
    function itemExists(existingData, newItem) {
        return existingData.some(item => {
            // Compare properties here
            return item.id === newItem.id && item.title === newItem.title;
        });
    }

    // Function to post a new item to the API
    async function postNewItem(apiUrl, newItem) {
        await fetch(apiUrl, {
            method: 'PUT', // Use POST for adding a new item
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(newItem),
        });
    }

    try {
        const existingData = await fetchData(apiUrl);

        // Check if the item already exists
        if (!itemExists(existingData, newItem)) {
            // If it doesn't exist, post the new item
            console.log('Item does not exist. Posting...');
            await postNewItem(apiUrl, newItem);
        } else {
            console.log('Item already exists. Not posting.');
        }
    } catch (error) {
        console.error('Error fetching or posting data:', error);
    }
}
    </script>
    

</body>
</html>
